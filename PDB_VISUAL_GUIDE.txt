â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              PORTABLE PDB IMPLEMENTATION - VISUAL GUIDE                        â•‘
â•‘                   Flowcharts, Diagrams & Architecture Maps                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECTION 1: BOUND NODE HIERARCHY WITH SYNTAX CAPTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

BEFORE (Current):
    BoundNode (abstract)
    â”œâ”€â”€ BoundBlockStatement
    â”‚   â””â”€â”€ [NO Syntax property]
    â”œâ”€â”€ BoundIfStatement
    â”‚   â””â”€â”€ [NO Syntax property]
    â”œâ”€â”€ BoundLoopStatement
    â”‚   â””â”€â”€ [NO Syntax property]
    â”œâ”€â”€ BoundSwitchStatement
    â”‚   â””â”€â”€ [NO Syntax property]
    â””â”€â”€ BoundFunctionDeclaration
        â””â”€â”€ [NO Syntax property]

AFTER (Fixed):
    BoundNode (abstract)
    â”œâ”€â”€ Syntax: SyntaxNode? { get; virtual }  âœ¨ NEW
    â”‚
    â”œâ”€â”€ BoundBlockStatement
    â”‚   â””â”€â”€ Syntax: null (synthetic)
    â”œâ”€â”€ BoundIfStatement
    â”‚   â””â”€â”€ Syntax: IfStatementSyntax?  âœ¨ NEW
    â”œâ”€â”€ BoundLoopStatement
    â”‚   â””â”€â”€ Syntax: LoopStatementSyntax?  âœ¨ NEW
    â”œâ”€â”€ BoundSwitchStatement
    â”‚   â””â”€â”€ Syntax: SwitchStatementSyntax?  âœ¨ NEW
    â””â”€â”€ BoundFunctionDeclaration
        â””â”€â”€ Syntax: FunctionDeclarationSyntax?  âœ¨ NEW

    BoundOmgClause (not a BoundNode)
    â””â”€â”€ Syntax: OmgClauseSyntax?  âœ¨ NEW

    BoundMebbeClause (not a BoundNode)
    â””â”€â”€ Syntax: MebbeClauseSyntax?  âœ¨ NEW


SECTION 2: SEQUENCE POINT EMISSION FLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

FOR IF STATEMENT:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Parse: O RLY?       â”‚ (IfStatementSyntax created)
    â”‚   condition         â”‚
    â”‚   YATOTLD           â”‚
    â”‚     statements      â”‚
    â”‚   OIC               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Bind: BindIfStatementâ”‚ (Pass IfStatementSyntax to constructor)
    â”‚ â†’ BoundIfStatement  â”‚
    â”‚   with Syntax       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Generate: EmitIf    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
       â”‚               â”‚
       â–¼               â–¼
    EMIT SEQUENCE   EMIT IL
    POINT FOR:      FOR:
    - ORlyKeyword   - Condition
    (header only)   - Branch labels
                    - Block statements
                    - Jump targets

RESULT:
    Line 3: O RLY?           â† Debugger marks this line
    Line 4:   VISIBLE "yes"  â† Debugger marks this line separately
    Line 5: OIC              â† NOT marked (part of header)

FOR SWITCH STATEMENT:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Parse: WTF?          â”‚ (SwitchStatementSyntax created)
    â”‚   OMG "val1"         â”‚ (OmgClauseSyntax created)
    â”‚     statements       â”‚
    â”‚   OMG "val2"         â”‚ (OmgClauseSyntax created)
    â”‚     statements       â”‚
    â”‚   OMGWTF             â”‚
    â”‚     statements       â”‚
    â”‚ OIC                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Bind: BindSwitch     â”‚ (Pass syntax to all constructors)
    â”‚ â†’ BoundSwitchStatement
    â”‚   â”œâ”€ BoundOmgClause[0] w/ Syntax
    â”‚   â”œâ”€ BoundOmgClause[1] w/ Syntax
    â”‚   â””â”€ DefaultBlock
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Generate: EmitSwitch â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                        â”‚
       â–¼                        â–¼
    EMIT SEQUENCE POINT    EMIT IL FOR
    FOR:                   EACH CLAUSE:
    1. WtfKeyword (header) - Load switch value
    2. OmgKeyword[0]       - Compare & jump
    3. OmgKeyword[1]       - Execute body
    4. OmgKeyword[2]       - Continue
    5. OmgwtfKeyword       - (if it has span)

RESULT:
    Line 10: WTF?          â† Debugger marks header
    Line 11:   OMG "val1"  â† Debugger marks clause
    Line 12:     statement â† Debugger marks body
    Line 13:   OMG "val2"  â† Debugger marks clause
    Line 14:     statement â† Debugger marks body


SECTION 3: SYNTAX SPAN SIZES (THE PROBLEM)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

WRONG (Current behavior if emitting for entire span):
    IfStatementSyntax.Span = "O RLY?" to "OIC"
    
    Line 5:  O RLY?                          â† Entire block
    Line 6:    VISIBLE "1"                      highlighted
    Line 7:    VISIBLE "2"                      as "current
    Line 8:    VISIBLE "3"                      line"
    Line 9:    VISIBLE "4"              ğŸ’¥ WRONG!
    Line 10:   VISIBLE "5"
    ... (50 more lines)
    Line 60:   VISIBLE "55"
    Line 61: OIC
    
    "Why is the debugger here? The code looks like one huge block!"

CORRECT (Fixed behavior):
    ORlyKeyword.Span = just "O RLY?" on line 5
    
    Line 5:  O RLY?           â† Only this line is marked âœ“
    Line 6:    VISIBLE "1"    â† This line marked separately âœ“
    Line 7:    VISIBLE "2"    â† This line marked separately âœ“
    Line 8:    VISIBLE "3"    â† This line marked separately âœ“
    ... (more statements, each marked)
    Line 61: OIC              â† NOT marked (footer)
    
    "The debugger is showing exactly where I am!"


SECTION 4: FUNCTION BOUNDARIES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

WITHOUT Sequence Points (Current):
    HOW IZ I add
        A R B PLUS 1              â† Step in lands here (wrong!)
        GTFO WITH A
    IF U SAY SO
    
    Debugger Experience:
    âœ— Step in to "add" function â†’ Lands on "A R B PLUS 1" (no entry point)
    âœ— Step out â†’ Doesn't know where the function returns to
    âœ— Step over "return" â†’ Lands nowhere (no exit point)

WITH Sequence Points (Fixed):
    HOW IZ I add                  â† EmitSequencePoint here
        A R B PLUS 1              â† Step in lands here (correct!)
        GTFO WITH A
    IF U SAY SO                   â† EmitSequencePoint here
    
    Debugger Experience:
    âœ“ Step in to "add" function â†’ Lands on "HOW IZ I add" (correct entry)
    âœ“ Step to next statement â†’ Lands on "A R B PLUS 1"
    âœ“ Step out â†’ Returns to caller with "IF U SAY SO" marked
    âœ“ Call stack shows "add" function boundaries


SECTION 5: BINDING PHASE - SYNTAX CAPTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

BindIfStatement Method Flow:

    INPUT: IfStatementSyntax syntax
           (contains ORlyKeyword, Condition, ThenBlock, MebbeClauses, ElseBlock)
           
    â–¼
    
    Bind condition
    Bind then block statements
    Bind mebbe clauses
    Bind else block (if present)
    
    â–¼
    
    CREATE: BoundIfStatement(
        thenBlock,
        mebbeClauses,
        elseBlock,
        syntax              â† âœ¨ NEW: Pass syntax here
    )
    
    â–¼
    
    OUTPUT: BoundIfStatement
            with Syntax property set to original IfStatementSyntax


SECTION 6: CODEGEN PHASE - SEQUENCE POINT EMISSION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EmitIfStatement Method Flow:

    INPUT: BoundIfStatement ifStatement
           (now has .Syntax property)
    
    â–¼
    
    if (ifStatement.Syntax != null)
    {
        EmitSequencePoint(
            ifStatement.Syntax.ORlyKeyword.Span
        )                           â† âœ¨ NEW: Just the keyword!
    }
    
    â–¼
    
    EmitExpression(condition)      â† Evaluate condition
    
    â–¼
    
    if (result is truthy)
        goto thenLabel
    else
        goto firstMebbeLabel
    
    â–¼
    
    thenLabel:
    EmitBlock(thenBlock)            â† Block emits its statements
    
    â–¼
    
    foreach (mebbe in mebbeClauses)
    {
        if (mebbe.Syntax != null)
        {
            EmitSequencePoint(
                mebbe.Syntax.MebbeKeyword.Span  â† âœ¨ NEW
            )
        }
        
        EmitExpression(mebbe.Condition)
        if (result) goto mebbeBody
        else goto nextMebbeLabel
        
        mebbeBody:
        EmitBlock(mebbe.Body)
    }
    
    â–¼
    
    elseLabel:
    if (ifStatement.ElseBlock != null)
        EmitBlock(ifStatement.ElseBlock)
    
    â–¼
    
    OUTPUT: IL instructions with sequence point metadata


SECTION 7: COMPARISON TABLE - WHAT CHANGED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Statement        â”‚ Before              â”‚ After                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundBlockStatement
â”‚                  â”‚ .Syntax: âˆ…          â”‚ .Syntax: null (synthetic)â”‚
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ— (guarded)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundIfStatement â”‚ .Syntax: âˆ…          â”‚ .Syntax: IfStatementSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“ (header only)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundLoopStatement
â”‚                  â”‚ .Syntax: âˆ…          â”‚ .Syntax: LoopStatementSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“ (header only)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundSwitchStatement
â”‚                  â”‚ .Syntax: âˆ…          â”‚ .Syntax: SwitchStatementSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“ (header+cases)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundOmgClause   â”‚ .Syntax: âˆ…          â”‚ .Syntax: OmgClauseSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundMebbeClause â”‚ .Syntax: âˆ…          â”‚ .Syntax: MebbeClauseSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BoundFunctionDeclaration
â”‚                  â”‚ .Syntax: âˆ…          â”‚ .Syntax: FunctionDeclSyntax
â”‚                  â”‚ Emit SP: âœ—          â”‚ Emit SP: âœ“ (entry+exit) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: âˆ… = missing   âœ— = no/wrong   âœ“ = yes/correct   SP = Sequence Point


SECTION 8: IMPLEMENTATION DEPENDENCY GRAPH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Phase 1: BoundNodes â”‚
                           â”‚   Add Syntax props  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                  â”‚                  â”‚
                   â–¼                  â–¼                  â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ IF Statement â”‚   â”‚ Loop Statementâ”‚   â”‚Switch/Clausesâ”‚
            â”‚ (.Syntax)    â”‚   â”‚ (.Syntax)     â”‚   â”‚ (.Syntax)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚                  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Phase 2: Binder     â”‚
                           â”‚  Pass Syntax in     â”‚
                           â”‚  constructors       â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                  â”‚                  â”‚
                   â–¼                  â–¼                  â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Emit IF      â”‚   â”‚ Emit Loop     â”‚   â”‚ Emit Switch  â”‚
            â”‚ (header SP)  â”‚   â”‚ (header SP)   â”‚   â”‚ (all SPs)    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚                  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚ Phase 3: CodeGen    â”‚
                           â”‚  Emit Sequence Pts  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                  â”‚                  â”‚
                   â–¼                  â–¼                  â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Function     â”‚   â”‚ Test Cleanup  â”‚   â”‚ Debugging &  â”‚
            â”‚ Entry/Exit   â”‚   â”‚ PDB deletion  â”‚   â”‚ Validation   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SECTION 9: SEQUENCE POINT COVERAGE MATRIX
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Statement Type          â”‚ Top-Level â”‚ Sub-expr â”‚ Entry â”‚ Exit â”‚ Note
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€
Variable Declaration    â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
Assignment              â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
VISIBLE (Print)         â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
GIMMEH (Input)          â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
Expression (bare)       â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Block Statement         â”‚     âœ—     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Never (synthetic)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
IF Statement            â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Header only
  â”œâ”€ Header (O RLY?)    â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span
  â””â”€ MEBBE clauses      â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span each
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
LOOP Statement          â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Header only
  â””â”€ Header             â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SWITCH Statement        â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Header + cases
  â”œâ”€ Header (WTF?)      â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span
  â”œâ”€ OMG clauses        â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span each
  â””â”€ Default (OMGWTF)   â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Keyword span
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FUNCTION Declaration    â”‚     âœ“     â”‚    â€”     â”‚  âœ“   â”‚  âœ“   â”‚ Header + exit
  â”œâ”€ Entry (HOW IZ I)   â”‚     âœ“     â”‚    â€”     â”‚  âœ“   â”‚  â€”   â”‚ Keyword span
  â””â”€ Exit (IF U SAY SO) â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  âœ“   â”‚ Keyword span
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GTFO (Break)            â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span
GTFO WITH (Return)      â”‚     âœ“     â”‚    â€”     â”‚  â€”    â”‚  â€”   â”‚ Full span

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
